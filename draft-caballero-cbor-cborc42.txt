



Concise Binary Object Representation Maintenance and ExtensionsJ. Caballero
Internet-Draft                                                 R. Berjon
Intended status: Informational                           IPFS Foundation
Expires: 16 October 2025                                   14 April 2025


                    The tag-42 profile of CBOR Core
                  draft-caballero-cbor-cborc42-latest

Abstract

   This document defines a strict profile of CBOR Core (CBOR/c) intended
   for use with the special tag 42.  Like the CBOR Core it profiles,
   "CBOR/c-42" can also be used as an internet-scale serialization for
   JSON, and is optimized for objects that compose into a directed
   acyclical graph.  Since CBOR/c-42 objects link to one another by
   hash-based identifiers, deterministic encoding is mandated.  This
   document mainly targets CBOR tool developers and those downstream
   users who would like to precisely configure their tools.

About This Document

   This note is to be removed before publishing as an RFC.

   The latest revision of this draft can be found at https://ipfs-
   tech.github.io/cborc42/draft-caballero-cbor-cborc42.html.  Status
   information for this document may be found at
   https://datatracker.ietf.org/doc/draft-caballero-cbor-cborc42/.

   Discussion of this document takes place on the Concise Binary Object
   Representation Maintenance and Extensions mailing list
   (mailto:cbor@ietf.org), which is archived at https://www.ietf.org/
   mail-archive/web/cbor/current/maillist.html.  Subscribe at
   https://www.ietf.org/mailman/listinfo/cbor/.

   Source for this draft and an issue tracker can be found at
   https://github.com/ipfs-tech/cborc42.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on 16 October 2025.

Copyright Notice

   Copyright (c) 2025 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents (https://trustee.ietf.org/
   license-info) in effect on the date of publication of this document.
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.  Code Components
   extracted from this document must include Revised BSD License text as
   described in Section 4.e of the Trust Legal Provisions and are
   provided without warranty as described in the Revised BSD License.

Table of Contents

   1.  Introduction
     1.1.  Design Goals
     1.2.  Requirements Language
     1.3.  Common Definitions
   2.  Specification
     2.1.  Supported CBOR Objects
     2.2.  Deterministic Encoding Scheme Profile
     2.3.  CBOR Tool Requirements
   3.  Security Considerations
   4.  IANA Considerations
   5.  References
     5.1.  Normative References
     5.2.  Informative References
   Appendix A.  Binary Content Identifiers (Tag 42)
   Acknowledgments
   Authors' Addresses

1.  Introduction

   The IPFS ecosystem has long made structural usage of its own home-
   grown CBOR profile, dating from the early days of the CBOR working
   group and fine-tuned over the years in community/internal venues.
   Configuring CBOR tooling in various languages to decode this data and
   encode new data conformantly has been a challenge, and a unified
   specification (updated to modern terminology, as the CBOR working
   group has iterated and evolved so much in the intervening years) is
   set out in this document.

   Note: unlike the CBOR/c specification, no opinion on signing
   mechanics is expressed here, and will be addressed in future
   documents, if at all.

1.1.  Design Goals

   The primary goal with this specification, is enabling application
   developers to configure CBOR tooling for this profile in as language-
   agnostic a way as possible.  The historical design of this profile
   was to maximize determinism and simplicity for an internet-scale
   directed acyclical graph of CBOR documents linked to one another by
   binary hashes.  These simple content identifiers, defined in
   Appendix A, are always expressed as bytestrings of tag 42 (similar in
   design to to [RFC6920] Named Information Hashes).  All other tags,
   and many major and minor types, are forbidden to reduce ambiguity,
   and developers are encouraged to express many kinds of data at higher
   layers by using the supported types (such as strings or bytestrings).

1.2.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   BCP 14 [RFC2119] [RFC8174] when, and only when, they appear in all
   capitals, as shown here.

1.3.  Common Definitions

   *  This document uses the conventions defined in CDDL [RFC8610] for
      expressing the type of CBOR [RFC8949] data items.

   *  Examples showing CBOR data, are expressed in "diagnostic notation"
      as defined in Section 8 of [RFC8949].

   *  The term "CBOR object" is equivalent to "CBOR data item" used in
      [RFC8949].

   *  The term "CBOR Core" is in this document abbreviated to "CBOR/c".

2.  Specification

   This section describes how CBOR/c-42 subsets CBOR and differs from a
   standard CDE encoding.

2.1.  Supported CBOR Objects

           +========+=========================================+
           | CBOR   | Comment                                 |
           +========+=========================================+
           | int    | Integer                                 |
           +--------+-----------------------------------------+
           | bigint | Big integer                             |
           +--------+-----------------------------------------+
           | float  | 64-bit [IEEE754] numbers ONLY           |
           +--------+-----------------------------------------+
           | tstr   | Text string encoded as UTF-8 [RFC3629]  |
           +--------+-----------------------------------------+
           | bstr   | Byte string                             |
           +--------+-----------------------------------------+
           | []     | Array                                   |
           +--------+-----------------------------------------+
           | {}     | Map                                     |
           +--------+-----------------------------------------+
           | tag 42 | See Appendix A; no other tags allowed   |
           +--------+-----------------------------------------+
           | bool   | Boolean true and false (major type 7)   |
           +--------+-----------------------------------------+
           | null   | Represents a null object (major type 7) |
           +--------+-----------------------------------------+

                                 Table 1

2.2.  Deterministic Encoding Scheme Profile

2.3.  CBOR Tool Requirements

3.  Security Considerations

   TODO Security

4.  IANA Considerations

   This document has no IANA actions.

5.  References

5.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/rfc/rfc2119>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/rfc/rfc8174>.

   [RFC8610]  Birkholz, H., Vigano, C., and C. Bormann, "Concise Data
              Definition Language (CDDL): A Notational Convention to
              Express Concise Binary Object Representation (CBOR) and
              JSON Data Structures", RFC 8610, DOI 10.17487/RFC8610,
              June 2019, <https://www.rfc-editor.org/rfc/rfc8610>.

   [RFC8949]  Bormann, C. and P. Hoffman, "Concise Binary Object
              Representation (CBOR)", STD 94, RFC 8949,
              DOI 10.17487/RFC8949, December 2020,
              <https://www.rfc-editor.org/rfc/rfc8949>.

5.2.  Informative References

   [RFC6920]  Farrell, S., Kutscher, D., Dannewitz, C., Ohlman, B.,
              Keranen, A., and P. Hallam-Baker, "Naming Things with
              Hashes", RFC 6920, DOI 10.17487/RFC6920, April 2013,
              <https://www.rfc-editor.org/rfc/rfc6920>.

Appendix A.  Binary Content Identifiers (Tag 42)

Acknowledgments

   TODO acknowledge.

Authors' Addresses

   Juan Caballero
   IPFS Foundation
   Email: bumblefudge@learningproof.xyz


   Robin Berjon
   IPFS Foundation
   Email: robin@berjon.com
